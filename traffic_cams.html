<html>
<head>
<link href="https://vjs.zencdn.net/7.10.2/video-js.css" rel="stylesheet" />

<script>
function startPlayers(){
	var maxHeight = 240;
	var maxWidth = maxHeight*3/2;
	console.log('innerWidth: '+window.innerWidth);
	var numVidsWide = Math.floor(window.innerWidth/maxWidth);
	console.log('Vids Wide: '+numVidsWide);
	var numVidsTall = Math.floor(window.innerHeight/maxHeight);
	console.log('Vids Tall: '+numVidsTall);
	var maxVids = numVidsWide*numVidsTall;
	console.log('Max Videos: '+maxVids);
	
	const queryString = window.location.search;
	const urlParams = new URLSearchParams(queryString);
	var showAll = urlParams.get('all');
	var test = urlParams.get('test');
	
	if (maxVids > 20 && showAll == null){
		maxVids = 20;
		
		if (numVidsWide > 5 && numVidsTall >= 4){
			numVidsWide = 5;
			numVidsTall = 4;
		}
		if (numVidsTall > 4 && numVidsWide >= 5){
			numVidsWide = 5;
			numVidsTall = 4;
		}
		if (numVidsWide > 4 && numVidsTall >= 5){
			numVidsWide = 4;
			numVidsTall = 5;
		}
		if (numVidsTall > 5 && numVidsWide >= 4){
			numVidsWide = 4;
			numVidsTall = 5;
		}
	}
	var width = window.innerWidth/numVidsWide/1.02;
	var height = width*2/3;
	var altHeight = window.innerHeight/numVidsTall/1.02;
	var altWidth = altHeight*3/2;
	if (altWidth < width) {
		width = altWidth;
		height = altHeight;
	}
	videojs.options.controls = false;
	videojs.options.autoplay = 'muted';
	videojs.options.preload = 'auto';
	videojs.options.width = width;
	videojs.options.height = height;
	
	if (showAll != null){
		var i;
		for(i = 1; i<=93; i++){
			addVideo(i);
		}
		for(i = 206; i<=210; i++){
			addVideo(i);
		}
		addVideo(100);
		addVideo(101);
	}
	else {
		if (maxVids >= 10)
			addVideo(2);
		addVideo(70);
		if (maxVids >= 18)
			addVideo(69);
		if (maxVids >= 5)
			addVideo(6);
		if (maxVids >= 8)
			addVideo(8);
		if (maxVids >= 7)
			addVideo(10);
		if (maxVids >= 11)
			addVideo(13);
		addVideo(16);
		if (maxVids >= 9)
			addVideo(18);
		if (maxVids >= 20)
			addVideo(55);
		if (maxVids >= 6)
			addVideo(20);
		if (maxVids >= 17)
			addVideo(23);
		if (maxVids >= 15)
			addVideo(26);
		if (maxVids >= 12)
			addVideo(35);
		addVideo(39);
		if (maxVids >=16)
			addVideo(44);
		if (maxVids >= 13)
			addVideo(50);
		addVideo(29);
		if (maxVids >= 14)
			addVideo(31);
		if (maxVids >= 19)
			addVideo(88);
	}
}

function addVideo(id){
//https://mcleansfs3.us-east-1.skyvdn.com/rtplive/R1_207/playlist.m3u8
	var video = document.createElement("video-js");
	video.id = "knoxville-"+id;
	var source = document.createElement("source");
	
	var srcStr = "https://mcleansfs";
	
	if (id <= 9)
		srcStr = srcStr + "5";
	else if (id <= 19)
		srcStr = srcStr + "1";
	else if (id <= 29)
		srcStr = srcStr + "2";
	else if (id <= 39)
		srcStr = srcStr + "3";
	else if (id <= 49)
		srcStr = srcStr + "4";
	else if (id <= 59)
		srcStr = srcStr + "5";
	else if (id == 70 || id == 71 || id == 72 || id == 73 || id == 74 || id == 75)
		srcStr = srcStr + "2";
	else if (id == 100 || id == 101)
		srcStr = srcStr + "2";
	else if (id == 79 || id == 80 || id == 82 || id == 93)
		srcStr = srcStr + "3";
	else if (id == 84)
		srcStr = srcStr + "5";
	else if (id >= 206 && id <= 210)
		srcStr = srcStr + "3";
	else if (id == 86 || id == 87)
		srcStr = srcStr + "2";
	else
		srcStr = srcStr + "1";
		
	srcStr = srcStr + ".us-east-1.skyvdn.com/rtplive/R1_";
	if (id < 100)
		srcStr = srcStr + "0";
	if (id < 10)
		srcStr = srcStr + "0";
	srcStr = srcStr + id;
	srcStr = srcStr + "/playlist.m3u8";
	source.src = srcStr;
	
	video.appendChild(source);
	video.onclick = function(){location.href='traffic_cam_showcase.html?showcase='+id;};
	document.body.appendChild(video);
	videojs('knoxville-'+id);
}
</script>

<style>
.video-js {
margin-left:-4px;
display:inline-block;
}
</style>
</head>
<body onLoad="startPlayers()" onResize="location.reload()" style="margin:0 0 0 0; background-color:#001">

 <!--<video-js id="knoxville-85" onClick="location.href='traffic_cam_showcase.html?showcase=85'">
 <source src="https://mcleansfs1.us-east-1.skyvdn.com/rtplive/R1_085/playlist.m3u8">
 </video-js>
<video-js id="knoxville-2" onClick="location.href='traffic_cam_showcase.html?showcase=2'">
 <source src="https://mcleansfs5.us-east-1.skyvdn.com/rtplive/R1_002/playlist.m3u8">
 </video-js>
  <video-js id="knoxville-4" onClick="location.href='traffic_cam_showcase.html?showcase=4'">
 <source src="https://mcleansfs5.us-east-1.skyvdn.com/rtplive/R1_004/playlist.m3u8">
 </video-js>
 <video-js id="knoxville-69" onClick="location.href='traffic_cam_showcase.html?showcase=69'">
 <source src="https://mcleansfs1.us-east-1.skyvdn.com/rtplive/R1_069/playlist.m3u8">
 </video-js>
 <video-js id="knoxville-6" onClick="location.href='traffic_cam_showcase.html?showcase=6'">
 <source src="https://mcleansfs5.us-east-1.skyvdn.com/rtplive/R1_006/playlist.m3u8">
 </video-js>
 <video-js id="knoxville-8" onClick="location.href='traffic_cam_showcase.html?showcase=8'">
 <source src="https://mcleansfs5.us-east-1.skyvdn.com/rtplive/R1_008/playlist.m3u8">
 </video-js> 
<video-js id="knoxville-10" onClick="location.href='traffic_cam_showcase.html?showcase=10'">
 <source src="https://mcleansfs1.us-east-1.skyvdn.com/rtplive/R1_010/playlist.m3u8">
 </video-js>
 <video-js id="knoxville-13" onClick="location.href='traffic_cam_showcase.html?showcase=13'">
 <source src="https://mcleansfs1.us-east-1.skyvdn.com/rtplive/R1_013/playlist.m3u8">
 </video-js>
  <video-js id="knoxville-16" onClick="location.href='traffic_cam_showcase.html?showcase=16'">
 <source src="https://mcleansfs1.us-east-1.skyvdn.com/rtplive/R1_016/playlist.m3u8">
 </video-js>
  <video-js id="knoxville-18" onClick="location.href='traffic_cam_showcase.html?showcase=18'">
 <source src="https://mcleansfs1.us-east-1.skyvdn.com/rtplive/R1_018/playlist.m3u8">
 </video-js>
 <video-js id="knoxville-20" onClick="location.href='traffic_cam_showcase.html?showcase=20'">
 <source src="https://mcleansfs2.us-east-1.skyvdn.com/rtplive/R1_020/playlist.m3u8">
 </video-js>
 <video-js id="knoxville-23" onClick="location.href='traffic_cam_showcase.html?showcase=23'">
 <source src="https://mcleansfs2.us-east-1.skyvdn.com/rtplive/R1_023/playlist.m3u8">
 </video-js>
 <video-js id="knoxville-26" onClick="location.href='traffic_cam_showcase.html?showcase=26'">
 <source src="https://mcleansfs2.us-east-1.skyvdn.com/rtplive/R1_026/playlist.m3u8">
 </video-js>
 <video-js id="knoxville-35" onClick="location.href='traffic_cam_showcase.html?showcase=35'">
 <source src="https://mcleansfs3.us-east-1.skyvdn.com/rtplive/R1_035/playlist.m3u8">
 </video-js>
 <video-js id="knoxville-39" onClick="location.href='traffic_cam_showcase.html?showcase=39'">
 <source src="https://mcleansfs3.us-east-1.skyvdn.com/rtplive/R1_039/playlist.m3u8">
 </video-js>
 <video-js id="knoxville-44" onClick="location.href='traffic_cam_showcase.html?showcase=44'">
 <source src="https://mcleansfs4.us-east-1.skyvdn.com/rtplive/R1_044/playlist.m3u8">
 </video-js>
 <video-js id="knoxville-50" onClick="location.href='traffic_cam_showcase.html?showcase=50'">
 <source src="https://mcleansfs5.us-east-1.skyvdn.com/rtplive/R1_050/playlist.m3u8">
 </video-js>
 <video-js id="knoxville-29" onClick="location.href='traffic_cam_showcase.html?showcase=29'">
 <source src="https://mcleansfs2.us-east-1.skyvdn.com/rtplive/R1_029/playlist.m3u8">
 </video-js>
 <video-js id="knoxville-31" onClick="location.href='traffic_cam_showcase.html?showcase=31'">
 <source src="https://mcleansfs3.us-east-1.skyvdn.com/rtplive/R1_031/playlist.m3u8">
 </video-js>
 <video-js id="knoxville-88" onClick="location.href='traffic_cam_showcase.html?showcase=88'">
 <source src="https://mcleansfs1.us-east-1.skyvdn.com/rtplive/R1_088/playlist.m3u8">
 </video-js>-->
   
 <script src="https://vjs.zencdn.net/7.10.2/video.min.js"></script>
</body>
</html>